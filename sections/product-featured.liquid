{% schema %}
{
  "name": "Product Featured",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "WACAT"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Esencia natural que estimula el instinto de beber"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "text",
      "id": "product_description",
      "label": "Product Description",
      "default": "Esencia natural para hidratación felina"
    },
    {
      "type": "text",
      "id": "shipping_text",
      "label": "Shipping Text",
      "default": "Envío gratuito 24-48h"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "Comprar Ahora"
    },
    {
      "type": "text",
      "id": "pharmacy_link_text",
      "label": "Pharmacy Link Text",
      "default": "También en farmacias"
    },
    {
      "type": "text",
      "id": "guarantee_text",
      "label": "Guarantee Text",
      "default": "Garantía 30 días"
    }
  ]
}
{% endschema %}

{%- assign product = all_products[section.settings.product] -%}
{%- if product.selected_or_first_available_variant -%}
  {%- assign variant = product.selected_or_first_available_variant -%}
  {%- assign product_price = variant.price | divided_by: 100 -%}
  {%- assign checkout_url = '/cart/add?id=' | append: variant.id -%}
{%- else -%}
  {%- assign product_price = 0 -%}
  {%- assign checkout_url = '#producto' -%}
{%- endif -%}

<section class="bg-wacat-cream py-20 md:py-32">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
      <!-- Image -->
      {% if product.featured_image %}
        <div class="animated-section">
          <img
            src="{{ product.featured_image | img_url: 'master' }}"
            alt="{{ product.title }}"
            class="w-full h-auto rounded-2xl"
            loading="lazy"
          />
        </div>
      {% endif %}

      <!-- Product Info -->
      <div class="space-y-8 text-center lg:text-left">
        <div>
          <h2 class="text-3xl md:text-4xl font-light text-wacat-navy mb-4">
            {{ product.title | default: 'WACAT' }}
          </h2>
          {% if product_price > 0 %}
            <div class="text-5xl font-light text-wacat-navy">
              {{ product_price }}€
            </div>
          {% endif %}
        </div>

        <a
          href="{{ checkout_url }}"
          class="buy-button inline-flex items-center justify-center bg-wacat-navy text-white px-10 py-5 rounded-full text-lg font-medium hover:bg-wacat-navy-dark active:scale-95 transition-all duration-300"
        >
          Comprar
        </a>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product Featured",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "El producto"
    },
    {
      "type": "textarea",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Cada gota cuenta para la salud de tu gato"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "textarea",
      "id": "product_tagline",
      "label": "Product Tagline",
      "default": "Esencia natural que hace que el agua sea irresistible para tu gato"
    },
    {
      "type": "text",
      "id": "cta_primary_text",
      "label": "Primary CTA Text",
      "default": "Comprar ahora"
    },
    {
      "type": "text",
      "id": "cta_secondary_text",
      "label": "Secondary CTA Text",
      "default": "Ver ingredientes"
    },
    {
      "type": "text",
      "id": "guarantee_title",
      "label": "Guarantee Title",
      "default": "Garantía satisfacción"
    },
    {
      "type": "text",
      "id": "guarantee_description",
      "label": "Guarantee Description",
      "default": "30 días o te devolvemos tu dinero"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Featured Badge Text",
      "default": "Producto destacado"
    },
    {
      "type": "text",
      "id": "tax_text",
      "label": "Tax Text",
      "default": "IVA incluido"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Product Feature",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (Line Awesome)",
          "default": "la-leaf"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "100% Natural"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "Solo ingredientes naturales"
        }
      ]
    },
    {
      "type": "trust_badge",
      "name": "Trust Badge",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (Line Awesome)",
          "default": "la-shipping-fast"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Envío 24-48h"
        }
      ]
    }
  ]
}
{% endschema %}

{%- assign product = all_products[section.settings.product] -%}
{%- if product.selected_or_first_available_variant -%}
  {%- assign variant = product.selected_or_first_available_variant -%}
  {%- assign product_price = variant.price | money_without_trailing_zeros -%}
  {%- assign checkout_url = '/cart/add?id=' | append: variant.id -%}
{%- else -%}
  {%- assign product_price = '29€' -%}
  {%- assign checkout_url = '#producto' -%}
{%- endif -%}

<style>
  #section-{{ section.id }} {
    padding: 21px 27px;
    background: #ffffff;
    font-family: Assistant, sans-serif;
  }

  #section-{{ section.id }} .container {
    max-width: 120rem;
    margin: 0 auto;
  }

  #section-{{ section.id }} .section-header {
    text-align: center;
    margin-bottom: 48px;
  }

  #section-{{ section.id }} .section-title {
    font-size: 30px; /* h1 mobile EXACTO B3TTER */
    font-weight: 400;
    color: #121212;
    margin: 0 0 16px 0;
    line-height: 1.2;
    letter-spacing: 0.06rem; /* EXACTO B3TTER */
  }

  #section-{{ section.id }} .section-subtitle {
    font-size: 16px; /* body text EXACTO B3TTER */
    font-weight: 400;
    color: #7C7C7C;
    margin: 0;
    line-height: 1.5;
    letter-spacing: 0.06rem; /* EXACTO B3TTER */
  }

  #section-{{ section.id }} .product-grid {
    display: flex;
    flex-direction: column;
    gap: 32px;
    margin-bottom: 48px;
  }

  #section-{{ section.id }} .product-image-column {
    width: 100%;
  }

  #section-{{ section.id }} .product-image {
    width: 100%;
    height: auto;
    border-radius: 20px;
    display: block;
  }

  #section-{{ section.id }} .product-placeholder {
    width: 100%;
    aspect-ratio: 1;
    background: linear-gradient(135deg, #F3F3F3 0%, #ffffff 100%);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #section-{{ section.id }} .product-placeholder i {
    font-size: 72px;
    color: #EDEDED;
  }

  #section-{{ section.id }} .product-info-column {
    width: 100%;
  }

  #section-{{ section.id }} .badge {
    display: inline-block;
    padding: 8px 16px;
    background: #F3F3F3;
    border-radius: 32px;
    font-size: 14px;
    font-weight: 400;
    color: #121212;
    margin-bottom: 16px;
  }

  #section-{{ section.id }} .badge i {
    margin-right: 4px;
  }

  #section-{{ section.id }} .product-title {
    font-size: 30px; /* h1 mobile EXACTO B3TTER */
    font-weight: 400;
    color: #121212;
    margin: 0 0 16px 0;
    line-height: 1.2;
    letter-spacing: 0.06rem; /* EXACTO B3TTER */
  }

  #section-{{ section.id }} .product-tagline {
    font-size: 16px; /* body text EXACTO B3TTER */
    font-weight: 400;
    color: #7C7C7C;
    margin: 0 0 24px 0;
    line-height: 1.5;
    letter-spacing: 0.06rem; /* EXACTO B3TTER */
  }

  #section-{{ section.id }} .product-price-wrapper {
    display: flex;
    align-items: baseline;
    gap: 12px;
    margin-bottom: 32px;
  }

  #section-{{ section.id }} .product-price {
    font-size: 48px;
    font-weight: 400;
    color: #121212;
    margin: 0;
    line-height: 1;
  }

  #section-{{ section.id }} .tax-text {
    font-size: 12px;
    font-weight: 400;
    color: #7C7C7C;
  }

  #section-{{ section.id }} .features-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
    margin-bottom: 32px;
  }

  #section-{{ section.id }} .feature-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: #F3F3F3;
    border-radius: 20px;
  }

  #section-{{ section.id }} .feature-icon {
    width: 40px;
    height: 40px;
    background: #ffffff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  #section-{{ section.id }} .feature-icon i {
    font-size: 20px;
    color: #121212;
  }

  #section-{{ section.id }} .feature-content {
    flex: 1;
  }

  #section-{{ section.id }} .feature-title {
    font-size: 14px;
    font-weight: 400;
    color: #121212;
    margin: 0 0 4px 0;
  }

  #section-{{ section.id }} .feature-description {
    font-size: 12px;
    font-weight: 400;
    color: #7C7C7C;
    margin: 0;
  }

  #section-{{ section.id }} .cta-buttons {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 32px;
  }

  #section-{{ section.id }} .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 16px 32px;
    border-radius: 32px;
    font-size: 16px;
    font-weight: 400;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid #EDEDED;
    cursor: pointer;
  }

  #section-{{ section.id }} .btn-primary {
    background: #121212;
    color: #ffffff;
    border-color: #121212;
  }

  #section-{{ section.id }} .btn-primary:hover {
    background: #000000;
    border-color: #000000;
  }

  #section-{{ section.id }} .btn-secondary {
    background: #ffffff;
    color: #121212;
    border-color: #EDEDED;
  }

  #section-{{ section.id }} .btn-secondary:hover {
    background: #F3F3F3;
  }

  #section-{{ section.id }} .trust-badges {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 24px;
    padding-top: 16px;
    border-top: 1px solid #EDEDED;
  }

  #section-{{ section.id }} .trust-badge-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    font-weight: 400;
    color: #7C7C7C;
  }

  #section-{{ section.id }} .trust-badge-item i {
    font-size: 18px;
  }

  #section-{{ section.id }} .trust-badge-guarantee {
    color: #2d7a3e;
  }

  #section-{{ section.id }} .product-description-wrapper {
    margin-top: 48px;
  }

  #section-{{ section.id }} .product-description-card {
    padding: 28px;
    background: #F3F3F3;
    border-radius: 20px;
    font-size: 16px;
    font-weight: 400;
    color: #121212;
    line-height: 1.6;
  }

  @media (min-width: 768px) {
    #section-{{ section.id }} {
      padding: 28px 36px;
    }

    #section-{{ section.id }} .features-grid {
      grid-template-columns: 1fr 1fr;
    }

    #section-{{ section.id }} .cta-buttons {
      flex-direction: row;
    }

    #section-{{ section.id }} .btn {
      flex: 1;
    }
  }

  @media (min-width: 1024px) {
    #section-{{ section.id }} {
      padding: 36px 48px;
    }

    #section-{{ section.id }} .section-header {
      margin-bottom: 64px;
    }

    #section-{{ section.id }} .product-grid {
      flex-direction: row;
      gap: 64px;
      align-items: flex-start;
    }

    #section-{{ section.id }} .product-image-column {
      width: 50%;
    }

    #section-{{ section.id }} .product-info-column {
      width: 50%;
    }

    #section-{{ section.id }} .section-title {
      font-size: 40px; /* h1 desktop EXACTO B3TTER */
    }

    #section-{{ section.id }} .section-subtitle {
      font-size: 16px; /* body text B3TTER (sin cambio desktop) */
    }

    #section-{{ section.id }} .product-title {
      font-size: 40px; /* h1 desktop EXACTO B3TTER */
    }
  }
</style>

<section id="section-{{ section.id }}">
  <div class="container">

    <div class="section-header">
      <h2 class="section-title">{{ section.settings.section_title }}</h2>
      <p class="section-subtitle">{{ section.settings.section_subtitle }}</p>
    </div>

    <div class="product-grid">

      <div class="product-image-column">
        {% if product.featured_image %}
          <img
            src="{{ product.featured_image | img_url: 'master' }}"
            alt="{{ product.title }}"
            class="product-image"
            loading="lazy"
          />
        {% else %}
          <div class="product-placeholder">
            <i class="las la-box"></i>
          </div>
        {% endif %}
      </div>

      <div class="product-info-column">

        <div class="badge">
          <i class="las la-star"></i>
          {{ section.settings.badge_text }}
        </div>

        <h3 class="product-title">
          {{ product.title | default: 'WACAT Esencia Natural' }}
        </h3>

        <p class="product-tagline">
          {{ section.settings.product_tagline }}
        </p>

        <div class="product-price-wrapper">
          <span class="product-price">{{ product_price }}</span>
          <span class="tax-text">{{ section.settings.tax_text }}</span>
        </div>

        {% if section.blocks.size > 0 %}
          {% assign feature_blocks = section.blocks | where: "type", "feature" %}
          {% if feature_blocks.size > 0 %}
            <div class="features-grid">
              {% for block in feature_blocks %}
                <div class="feature-item">
                  <div class="feature-icon">
                    <i class="las {{ block.settings.icon }}"></i>
                  </div>
                  <div class="feature-content">
                    <div class="feature-title">{{ block.settings.title }}</div>
                    <div class="feature-description">{{ block.settings.description }}</div>
                  </div>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endif %}

        <div class="cta-buttons">
          <a href="{{ checkout_url }}" class="btn btn-primary">
            <i class="las la-shopping-cart"></i>
            {{ section.settings.cta_primary_text }}
          </a>
          <a href="#beneficios" class="btn btn-secondary">
            {{ section.settings.cta_secondary_text }}
          </a>
        </div>

        {% if section.blocks.size > 0 %}
          {% assign trust_blocks = section.blocks | where: "type", "trust_badge" %}
          {% if trust_blocks.size > 0 %}
            <div class="trust-badges">
              {% for block in trust_blocks %}
                <div class="trust-badge-item">
                  <i class="las {{ block.settings.icon }}"></i>
                  <span>{{ block.settings.text }}</span>
                </div>
              {% endfor %}
              <div class="trust-badge-item trust-badge-guarantee">
                <i class="las la-check-circle"></i>
                <span>{{ section.settings.guarantee_title }}</span>
              </div>
            </div>
          {% endif %}
        {% endif %}

      </div>
    </div>

    {% if product.description != blank %}
      <div class="product-description-wrapper">
        <div class="product-description-card">
          {{ product.description }}
        </div>
      </div>
    {% endif %}

  </div>
</section>

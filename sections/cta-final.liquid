{% schema %}
{
  "name": "CTA Final",
  "settings": [
    {
      "type": "textarea",
      "id": "title",
      "label": "Title",
      "default": "Dale a tu gato la hidrataci√≥n que merece y necesita"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "No esperes a que aparezcan problemas de salud. Previene ahora y disfruta de m√°s a√±os juntos."
    },
    {
      "type": "text",
      "id": "cta_primary_text",
      "label": "Primary CTA Text",
      "default": "S√≠, quiero cuidar a mi gato"
    },
    {
      "type": "text",
      "id": "cta_secondary_text",
      "label": "Secondary CTA Text",
      "default": "Ver farmacias cercanas"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "textarea",
      "id": "testimonial_quote",
      "label": "Testimonial Quote",
      "default": "Llevaba meses preocupada porque Luna apenas beb√≠a. Con WACAT ha sido un cambio incre√≠ble. Ahora bebe 3 veces m√°s y est√° mucho m√°s activa."
    },
    {
      "type": "text",
      "id": "testimonial_author",
      "label": "Testimonial Author",
      "default": "Mar√≠a"
    },
    {
      "type": "text",
      "id": "testimonial_cat_name",
      "label": "Testimonial Cat Name",
      "default": "Luna"
    },
    {
      "type": "text",
      "id": "testimonial_cat_age",
      "label": "Testimonial Cat Age",
      "default": "7 a√±os"
    }
  ]
}
{% endschema %}

{%- assign product = all_products[section.settings.product] -%}
{%- if product.selected_or_first_available_variant -%}
  {%- assign variant = product.selected_or_first_available_variant -%}
  {%- assign product_price = variant.price | money_without_trailing_zeros -%}
  {%- assign checkout_url = '/cart/add?id=' | append: variant.id -%}
{%- else -%}
  {%- assign product_price = '' -%}
  {%- assign checkout_url = '#producto' -%}
{%- endif -%}

<section class="bg-gradient-to-br from-wacat-navy via-wacat-navy-dark to-wacat-navy py-16 md:py-20 relative overflow-hidden">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
    <div class="text-5xl mb-6">üíô</div>

    <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-4">
      {{ section.settings.title }}
    </h2>

    <p class="text-base md:text-lg text-white/90 mb-8 max-w-2xl mx-auto">
      {{ section.settings.subtitle }}
    </p>

    <!-- Trust elements compactos -->
    <div class="flex flex-wrap items-center justify-center gap-6 mb-8 text-sm text-white/80">
      <span>üõ°Ô∏è Garant√≠a 30 d√≠as</span>
      <span>üì¶ Env√≠o 24-48h</span>
      <span>üë®‚Äç‚öïÔ∏è Veterinarios</span>
    </div>

    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
      <a
        href="{{ checkout_url }}"
        class="inline-flex items-center justify-center gap-2 bg-wacat-cream text-wacat-navy px-8 py-3 rounded-full text-sm font-bold hover:bg-white hover:scale-105 transition-all duration-300 shadow-xl"
      >
        üíô {{ section.settings.cta_primary_text }}
        {% if product_price != '' %}
          <span class="text-xs opacity-80">({{ product_price }})</span>
        {% endif %}
      </a>
      <a
        href="#donde-comprar"
        class="inline-flex items-center justify-center gap-2 border-2 border-white/50 text-white px-8 py-3 rounded-full text-sm font-semibold hover:border-white hover:bg-white/10 transition-all duration-300"
      >
        üìç {{ section.settings.cta_secondary_text }}
      </a>
    </div>

    <!-- Testimonial compacto -->
    <div class="pt-8 border-t border-white/20 max-w-2xl mx-auto">
      <div class="flex items-center justify-center gap-1 mb-3">
        {% for i in (1..5) %}
          <span class="text-xl">‚≠ê</span>
        {% endfor %}
      </div>
      <p class="text-white/95 text-sm md:text-base italic mb-3 leading-relaxed">
        "{{ section.settings.testimonial_quote }}"
      </p>
      <p class="text-white/70 text-xs">
        - {{ section.settings.testimonial_author }}, {{ section.settings.testimonial_cat_name }} ({{ section.settings.testimonial_cat_age }})
      </p>
    </div>
  </div>
</section>
